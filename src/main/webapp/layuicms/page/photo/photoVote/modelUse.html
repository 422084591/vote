<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>模板</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <link rel="stylesheet" href="../../../lib/layui/css/layui.css" media="all"/>
    <style type="text/css">
        .layui-form-item .layui-inline {
            width: 33.333%;
            float: left;
            margin-right: 0;
        }

        @media (max-width: 1240px) {
            .layui-form-item .layui-inline {
                width: 100%;
                float: none;
            }
        }
    </style>
</head>
<body class="childrenBody">
<form class="layui-form" style="width:80%;">
<!--    <div class="layui-form-item">-->
<!--        <div class="layui-input-block">-->
<!--            <button class="layui-btn" lay-submit="" lay-filter="addUser">发布</button>-->
<!--            <button type="reset" class="layui-btn layui-btn-primary">重置</button>-->
<!--        </div>-->
<!--    </div>-->
<!--    //lay-filter="addUser"-->
    <div class="layui-inline">
        <a class="layui-btn layui-btn-normal add_Vote" align="right" lay-submit="" lay-filter="addVote">发布</a>
        <a class="layui-btn layui-btn-normal add_btn" align="right" lay-submit="" lay-filter="addModel">存入模板</a>
        <a class="layui-btn layui-btn-normal add_btn" align="right" lay-submit="" lay-filter="yulan">预览</a>
    </div>
    <div class="layui-form-item parent-menu">
        <label class="layui-form-label">标题</label>
        <div id="title1" class="layui-input-block">
            <input type="text" class="layui-input"  name="title" placeholder="请输入标题">
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">投票说明</label>
        <div id="title2" class="layui-input-block">
            <input type="text" class="layui-input" name="votingInstruction" placeholder="请输入题目">
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">投票人数</label>
        <div id="title3" class="layui-input-block">
            <input type="text" class="layui-input" name="votedNum" placeholder="请输入题目">
        </div>
    </div>
    <div id="gradfather">

    </div>
    <button type="button" id="appendmore" class="layui-btn layui-btn-primary appendmore" >添加题目内容</button>
<!--    <button class="layui-btn layui-btn-primary appendmore" onclick="huoqu()">获取数据</button>-->

</form>

<!--一般情况下，一个业务页面引入一个layui.js,config.js和业务js这三个js就够了-->
<script type="text/javascript" src="../../../lib/layui/layui.js"></script>
<script type="text/javascript" src="../../../common/js/config.js"></script>
<script type="text/javascript" src="modelUse.js"></script>
<script type="text/javascript" src="../../../lib/jquery-2.2.4/jquery.js"></script>
<script type="text/javascript">
    function huoqu() {

        var a = $("#title1 input").val();//标题
        var b = $("#title2 input").val();//投票说明
        var c = $("#title3 input").val();//投票人数
        var title = $("#gradfather").children("div");
        var bz_jihe = [];
        for (var i = 0; i < title.length; i++) {

            var d = $($($($(title[i]).children(".layui-form-item")[0]).children("div")[0]).children("input")[0]).val();
            //题目


            var choose = $($($(title[i]).children(".layui-input-block")[0]).children("input")[0]).is(":checked");
            //选项规则
            // alert(choose);
            var die = $($(title[i]).children(".father")[0]);
            var answer = die.children(".layui-form-item");
            var zbz_jihe = [];
            for (var j = 0; j < answer.length; j++) {
                var e = $($($(answer[j]).children(".layui-input-block")[0]).children("input")[0]).val();
                //子标准 答案
                // alert(e);
                zbz_jihe.push(e);
            }
            var bz_obj = {d: d, choose: choose, zbz_jihe: zbz_jihe};
            bz_jihe.push(bz_obj);
        }
        var data = {a: a, b: b, c: c, bz_jihe: bz_jihe};

        alert(JSON.stringify(data));
        // console.log(a,b,c);
        // $($($($("#father").children(".layui-form-item")[0]).children(".layui-input-block")[0]).children("input")[0]).val();//取子标准

        // $.ajax({
        //     data:1,
        //     type : 'POST',
        //     url : $tool.getContext() +'Vote/voteadd.do/',//（1）请求的action路径,可以传递参数到后台
        //     error : function() {
        //         alert('请求失败 ');
        //     },
        //     success : function(data) {
        //         alert(data);
        //     }
        //
        // });
    }

    // var maxfile=2;
    // var items = [2];//表示每一题最大选项

    function zAppend(a){
        var id =$($(a.prev()).children()).length +1;
        $(a.prev()).append("<div class=\"layui-form-item\">\n" +
            '        <label class="layui-form-label">子标准'+id+'</label>' +
            "        <div class=\"layui-input-block\">\n" +
            "            <input type=\"text\" class=\"layui-input\"  name=\"answer\"  placeholder=\"选项答案\">\n" +
            "        </div>\n" +
            "    </div>");
    }


    // $(".appendmore").click(function () {
    //     // items[items.length] = 2;
    //     // if(index >= maxfile)    return;//限制最多maxfile个文件框
    //      //index1=index++;
    //     var index1 = $("#gradfather").children().length + 1;
    //     var add =   "   <div id=\"add\">\n"+
    //         ' <div class="layui-form-item">\n'+
    //     "<label class=\"layui-form-label\">题目"+index1+"</label>\n"+
    //      "   <div class=\"layui-input-block\">\n"+
    //     "   <input type=\"text\" class=\"layui-input\" name=\"content\" placeholder=\"请输入题目\">\n"+
    //     "   </div>\n"+
    //     "   </div>\n"+
    //         '        <div class="layui-upload">\n' +
    //         '            <button type="button" class="layui-btn" id="test2'+index+'" data-id="demo2'+index+'">多图片上传</button>\n' +
    //         '            <blockquote class="layui-elem-quote layui-quote-nm" style="margin-top: 10px;">\n' +
    //         '                预览图：\n' +
    //         '                <div class="layui-upload-list" id="demo2'+index+'"></div>\n' +
    //         '            </blockquote>\n' +
    //         '        </div>'+
    //     "   <div class=\"layui-input-block\">\n"+
    //     "   <label class=\"layui-form-label\">选项规则</label>\n"+
    //     '   <input type="radio" class="layui-input" name="optionRule'+ 1 +'"'+ 'value="单选" title="单选" checked="checked">' +
    //         '<div class=\"layui-unselect layui-form-radio\"><i class=\"layui-anim layui-icon\"></i><span>单选</span></div>\n'+
    //     '<input type="radio" class="layui-input" name="optionRule'+1 + '"'+ ' value="多选" title="多选">' +
    //         '<div class=\"layui-unselect layui-form-radio layui-form-radioed\"><i class=\"layui-anim layui-icon\"></i><span>多选</span></div>\n'+
    //     "</div>\n"+
    //     " <div class=\"father\">\n"+
    //     "<div class=\"layui-form-item\">\n"+
    //     "   <label class=\"layui-form-label\">子标准1</label>\n"+
    //     "   <div class=\"layui-input-block\">\n"+
    //     "   <input type=\"text\" class=\"layui-input\"  name=\"answer\" placeholder=\"选项答案\">\n"+
    //     "   </div>\n"+
    //     "   </div>\n"+
    //     "   <div class=\"layui-form-item\">\n"+
    //     "   <label class=\"layui-form-label\">子标准2</label>\n"+
    //     "   <div class=\"layui-input-block\">\n"+
    //     "   <input type=\"text\" class=\"layui-input\"  name=\"answer\" placeholder=\"选项答案\">\n"+
    //     "   </div>\n"+
    //     "   </div>\n"+
    //     "   </div>\n"+
    //     '   <button id="item'+index1 + '"type=\"button\" id=\"append\" class=\"layui-btn layui-btn-primary\" onclick=\"zAppend($(this));\">添加子标准</button></div>'
    //     ;
    //
    //
    //     $("#gradfather").append(add);
    //     index++;
    //     layui.form.render("radio");
    //
    // });
    // upload.render({
    //     elem: '#test2'
    //     ,url: '/upload/'
    //     ,multiple: true
    //     ,before: function(obj){
    //         //预读本地文件示例，不支持ie8
    //         obj.preview(function(index, file, result){
    //             $('#demo2').append('<img src="'+ result +'" alt="'+ file.name +'" class="layui-upload-img">')
    //         });
    //     }
    //     ,done: function(res){
    //         //上传完毕
    //     }
    // });

</script>

</body>
</html>
