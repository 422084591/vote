<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.gameloft9.demo.dataaccess.dao.system.TpGradeLogadmMapper">
    <resultMap id="BaseResultMap" type="com.gameloft9.demo.dataaccess.model.system.TpGradeLogadm">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue Dec 05 14:05:16 CST 2017.
        -->
        <id column="log_id" property="log_id" jdbcType="INTEGER"/>
        <result column="username" property="username" jdbcType="VARCHAR"/>
        <result column="l_time" property="l_time" jdbcType="TIMESTAMP"/>
        <result column="IP" property="ip" jdbcType="VARCHAR"/>
        <result column="operType" property="operType" jdbcType="VARCHAR"/>
    </resultMap>
    <sql id="Base_Column_List">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue Dec 05 14:05:16 CST 2017.
        -->
        log_id, username, l_time, IP as ip, operType
    </sql>
    <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.String">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue Dec 05 14:05:16 CST 2017.
        -->
        select
        <include refid="Base_Column_List"/>
        from tp_grade_logadm
        where username = #{username}
    </select>
    <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue Dec 05 14:05:16 CST 2017.
        -->
        delete from tp_grade_logadm
        where log_id = #{log_id}
    </delete>
    <insert id="insert" parameterType="com.gameloft9.demo.dataaccess.model.system.TpGradeLogadm">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue Dec 05 14:05:16 CST 2017.
        -->
        insert into tp_grade_logadm (username, l_time, IP, operType)
        values (#{username}, #{l_time}, #{ip}, #{operType)
    </insert>
    <insert id="insertSelective" parameterType="com.gameloft9.demo.dataaccess.model.system.TpGradeLogadm">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue Dec 05 14:05:16 CST 2017.
        -->
        insert into tp_grade_logadm
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="username != null">
                username,
            </if>
            <if test="l_time != null">
                l_time,
            </if>
            <if test="ip != null">
                IP,
            </if>
            <if test="operType != null">
                operType,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="username != null">
                #{username},
            </if>
            <if test="l_time != null">
                #{l_time},
            </if>
            <if test="ip != null">
                #{ip},
            </if>
            <if test="operType != null">
                #{operType},
            </if>
        </trim>
    </insert>
    <update id="updateByPrimaryKeySelective" parameterType="com.gameloft9.demo.dataaccess.model.system.TpGradeLogadm">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue Dec 05 14:05:16 CST 2017.
        -->
        update tp_grade_logadm
        <set>
            <if test="username != null">
                username = #{username},
            </if>
            <if test="l_time != null">
                l_time = #{l_time},
            </if>
            <if test="IP != null">
                IP = #{ip},
            </if>
            <if test="operType != null">
                operType = #{operType},
            </if>
        </set>
        where log_id = #{log_id}
    </update>
    <update id="updateByPrimaryKey" parameterType="com.gameloft9.demo.dataaccess.model.system.TpGradeLogadm">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue Dec 05 14:05:16 CST 2017.
        -->
        update tp_grade_logadm
        set username = #{username},
        l_time = #{l_time},
        IP = #{ip},
        operType = #{operType}
        where log_id = #{log_id}
    </update>
    <!--mysql 版本-->
    <select id="selectAll" resultMap="BaseResultMap" parameterType="map">

        select t.log_id, t.username, t.l_time, t.IP as ip,
        (select resName from tp_resourcelist where id = t.operType) as operType
        from tp_grade_logadm t,tp_resourcelist r
        where 1=1
        <if test="username !=null and username != ''">
            and t.username &lt; #{username}
        </if>
        and t.operType = r.id
        and r.resName != ''
        order by t.l_time desc, t.log_id desc
        limit #{start,jdbcType=DECIMAL},#{end,jdbcType=DECIMAL}

    </select>

    <select id="countSelectAll" resultType="Integer" parameterType="map">
        select count(1) from tp_grade_logadm t
        where 1=1
        <if test="username !=null and username != ''">
            and t.username = #{username}
        </if>
    </select>
    <!--mysql 版本-->
    <delete id="deleteByQuery" parameterType="map">
        delete t from tp_grade_logadm t
        where 1=1
        <if test="username !=null and username != ''">
            and t.username = #{username}
        </if>
    </delete>

    <!--mysql 版本-->
    <delete id="deleteByMap" parameterType="map">
        delete t from tp_grade_logadm t
        where 1=1
        <if test="loginName !=null and loginName != ''">
            and t.usernmae = #{loginName,jdbcType=VARCHAR}
        </if>
        <if test="operType !=null and operType != ''">
            and t.operType = #{operType,jdbcType=VARCHAR}
        </if>
        <if test="notDelIds != null">
            AND t.log_id not IN
            <foreach collection="notDelIds" index="index" item="item" open="(" separator="," close=")">
                #{item,jdbcType=VARCHAR}
            </foreach>
        </if>
    </delete>

    <!--mysql 版本-->
    <delete id="deleteByList" parameterType="map">
        delete t from tp_grade_logadm t
        where t.log_id in
        <foreach collection="delIds" index="index" item="item" open="(" separator="," close=")">
            #{item,jdbcType=VARCHAR}
        </foreach>
    </delete>

    <select id="selectName" parameterType="java.lang.String" resultType="java.lang.String">
        select resName from
        tp_resourcelist
        where resNum=#{memos}
        and resKind= 'rizhi'
    </select>
    
    <insert id="insertoper" parameterType="com.gameloft9.demo.dataaccess.model.system.TpResourcesList"
            useGeneratedKeys="true" keyProperty="id">
        insert into tp_resourcelist (resKind, resNum, resName)
        values (#{resKind}, #{resNum}, #{resName});
    </insert>

    <select id="getLog" parameterType="java.lang.String" resultType="com.gameloft9.demo.dataaccess.model.system.TpResourcesList">
        select * from
        tp_resourcelist
        where
        resKind = #{rizhi}
    </select>

    <update id="delLog" parameterType="java.lang.Integer">
        update tp_resourcelist
        set
        resName = ''
        where
        id = #{id}
    </update>

    <update id="updLog" parameterType="com.gameloft9.demo.dataaccess.model.system.TpResourcesList">
        update tp_resourcelist
        set
        resName = #{resName}
        where
        resNum = #{resNum}
        and resKind = #{resKind}
    </update>

    <delete id="delLogs" parameterType="java.lang.String">
        delete from tp_grade_logadm
        where
        operType = #{operType}
    </delete>

    <select id="selectid" parameterType="com.gameloft9.demo.dataaccess.model.system.TpResourcesList" resultType="java.lang.Integer">
        select id from
        tp_resourcelist
        where resKind = #{resKind}
        and resNum = #{resNum}
    </select>

</mapper>